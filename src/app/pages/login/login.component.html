<div class="login-div container my-6">
  <div class="flex justify-content-center align-item-center">
    <div class="">
      <div class="card shadow-sm border-color min-w-[370px]">
        <div class="card-body">
          <div
            class="isolate bg-white px-3 lg:px-5 border-inherit"
          >
            <div
              class="absolute inset-x-0 top-[-10rem] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[-20rem]"
              aria-hidden="true"
            ></div>
            <div class="d-flex " style="align-items: center;">
                <img src="assets/logos/logo.png" alt="" style="width: 12%;height: 13%;">
                <div class="mx-auto max-w-2xl ">
               
                    <h2
                      class="text-balance text-2xl font-semibold tracking-tight text-gray-900 sm:text-2xl"
                    >ComSec360
                    </h2>
                    <p class=" text-sm text-gray-600">Company Secretarial Management</p>
                  </div>
            </div>
          
            <div class="text-center text-black my-3" style="font-weight: 600;">
                Account User
            </div>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="mx-auto mt-4 max-w-xl sm:mt-4">
              <div>
                <!-- Email Field - Always visible -->
                <div>
                  <label for="email" class="block text-sm/6 font-medium text-gray-900">Email</label>
                  <div class="mt-1">
                    <input 
                      pInputText
                      type="email"
                      formControlName="email"
                      placeholder="xyz@gmail.com"
                      class="w-full"
                      [ngClass]="{
                        'input-error': loginForm.get('email')?.invalid && 
                        (loginForm.get('email')?.touched || loginForm.get('email')?.dirty)
                      }"
                    />
                    <p class="h-2 text-red-600">{{emailError}}</p>
                  </div>
                </div>
        
                <!-- Password Field - Always visible -->
                <div class="mt-2.5">
                  <label for="password" class="block text-sm/6 font-medium text-gray-900">Password</label>
                  <div class="mt-1">
                    <input
                      pInputText
                      type="password"
                      formControlName="password"
                      placeholder="********"
                      class="w-full"
                      [ngClass]="{
                        'input-error': loginForm.get('password')?.invalid && 
                        (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)
                      }"
                    />
                    <p class="h-2 text-red-600">{{passwordError}}</p>
                  </div>
                </div>
        
                <!-- OTP Field - Only visible after initial login -->
                @if (show2FA) {
                  <div class="mt-4">
                    <label for="otp" class="block text-sm/6 font-medium text-gray-900">
                      2 Factor Authentication Code
                    </label>
                    <div class="mt-1">
                      <input
                        pInputText
                        type="text"
                        formControlName="otp"
                        placeholder="Enter OTP"
                        class="w-full"
                      />
                    </div>
                    
                    <!-- Timer/Resend Section -->
                    @if (!showResend) {
                      <div class="text-sm text-gray-600 mt-2">
                        Resend code in {{ timer }} seconds
                      </div>
                    } @else {
                      <button
                        type="button"
                        (click)="resendCode()"
                        class="mt-2 text-indigo-600 hover:text-indigo-500 text-sm"
                      >
                        Resend Code
                      </button>
                    }
                  </div>
                }
        
                <!-- Submit Button -->
                <div class="mt-6">
                  <button
                    type="submit"
                    [disabled]="isLoading"
                    class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
                  >
                    {{ show2FA ? 'Verify OTP' : 'Login' }}
                  </button>
                </div>
        
                <!-- Register Link -->
                <div class="mt-4 text-center">
                  <span class="text-sm text-gray-700">No account?</span>
                  <a
                    [routerLink]="['/register']"
                    class="text-sm font-medium text-indigo-600 hover:underline ml-1"
                  >
                    Register Here
                  </a>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
